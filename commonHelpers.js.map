{"version":3,"file":"commonHelpers.js","sources":["../src/js/api-requests.js","../src/js/set-active.js","../src/js/category-markup.js","../src/js/best-sellers.js","../src/js/category-list.js"],"sourcesContent":["import axios from 'axios';\n\nexport class API_SERVICE {\n  #BASE_URL = 'https://books-backend.p.goit.global/';\n\n  constructor(selectedCategory, bookId) {\n    this.selectedCategory = selectedCategory;\n    this.bookId = bookId;\n  }\n  // -------------Запит на категорії-----------------------------\n  fetchBooksCategoryList() {\n    return axios.get(`${this.#BASE_URL}books/category-list`);\n  }\n\n  // ---------------Запит на ТОП книги(бестселлери)-----------------\n\n  fetchBestSellersBooks() {\n    return axios.get(`${this.#BASE_URL}books/top-books`);\n  }\n\n  // -------------Запит на категорію книги, примає назву категорії книги (категорії в сайд барі і по кнопці see more) -----------------\n\n  fetchBooksByCategory(selectedCategory) {\n    return axios.get(\n      `${this.#BASE_URL}books/category?category=${selectedCategory}`\n    );\n  }\n  // -------------Запит на інформацію про книгу (приймає ID книги) -----------------\n  fetchBookById(bookId) {\n    return axios.get(`${this.#BASE_URL}books/${bookId}`);\n  }\n}\n","export function setActive(evt) {\n  const category = document.querySelector('.category');\n\n    const activeCategory = evt.target\n\n      const allCategories = category.querySelectorAll('a');\n\n  allCategories.forEach(category => {\n    category.classList.remove('active');\n\n  });\n    activeCategory.classList.add('active')\n    \n  }","import { API_SERVICE } from './api-requests';\nimport { bestSellersMarkup } from './best-sellers';\nimport { setActive } from './set-active';\n// import { openModalId } from \"./modals\";\n\nconst apiByCategory = new API_SERVICE();\nconst topBooksByCategories = document.querySelector('.best-sellers-books');\nconst titleRef = document.querySelector('.home-page-title');\n\nfunction updatePageTitle(categoryTitle) {\n  const titleWords = categoryTitle.split(' ');\n  const accentWord = titleWords.pop();\n  const blackWords = titleWords.join(' ');\n  const pageTitle = `${blackWords} <span class=\"home-page-title-accent\">${accentWord}</span>`;\n  if (categoryTitle === 'All categories') {\n    return `\n    Best Sellers <span class=\"home-page-title-accent\">Books</span>`;\n  }\n  return pageTitle;\n}\n\nfunction selectedCategory(event) {\n  event.preventDefault();\n\n  // this.classList.add('active');\n\n  if (event.target.dataset.categoryName === 'All categories') {\n    bestSellersMarkup();\n    // titleRef.innerHTML = `\n    // Best Sellers <span class=\"home-page-title-accent\">Books</span>`;\n  }\n  const categoryName = this.getAttribute('data-category-name');\n  setActive(event);\n  // console.log(categoryName);\n\n  titleRef.innerHTML = updatePageTitle(categoryName);\n\n  topBooksByCategories.innerHTML = '';\n  onCategoryMarkup(categoryName);\n}\n\nasync function onCategoryMarkup(selectedOption) {\n  let result = await apiByCategory\n    .fetchBooksByCategory(selectedOption)\n    .then(categoryBooks => {\n      // console.log(categoryBooks)\n      const booksArr = categoryBooks.data\n        .map(\n          book =>\n            `<li class=\"category-book js-open-modal\" data-book-id=\"${book._id}\">\n             <img class=\"best-sellers-book-img\" src=\"${book.book_image}\" alt=\"${book.title}\" />\n             <p class=\"best-sellers-book-title\">${book.title}</p>\n             <p class=\"best-sellers-book-author\">${book.author}</p>\n             <p class=\"book-overlay\">Quick view</p>\n</li>`\n        )\n        .join('');\n      topBooksByCategories.classList.replace(\n        'best-sellers-books',\n        'category-books'\n      );\n      topBooksByCategories.innerHTML = booksArr;\n    })\n    .then(() => {\n      const openBookEl = document.querySelectorAll('.js-open-modal');\n      openBookEl.forEach(function (item) {\n        //  console.log(item);\n        item.addEventListener('click', openModalId);\n      });\n    });\n}\n\n// function setActive(event) {\n//   console.log([event.currentTarget]);\n//   const allCategories = [...event.target.parentElement];\n// console.log(allCategories);\n\n// allCategories.forEach(liItem => {\n//   console.log(liItem);\n//   liItem.classList.remove('active');\n// });\n//   event.target.classList.add('active');\n\n// }\n\nexport { selectedCategory };\n","\nimport { API_SERVICE} from \"./api-requests\";\nimport { selectedCategory } from \"./category-markup\";\n// import {openModalId}\n\nconst topBooksByCategories = document.querySelector('.best-sellers-books')\n\nconst apiCategories = new API_SERVICE();\n\nbestSellersMarkup();\n\nasync function bestSellersMarkup() {\n  let result = await apiCategories\n    .fetchBestSellersBooks()\n    // console.log(result)\n    .then(topCategories => {\n      return topCategories.data\n        .map(topCategory => {\n          // const {book} = bookAttributes;\n\n          // console.log(topCategory);\n          const booksArr = topCategory.books\n            .map(\n              book =>\n                `<li class=\"best-sellers-book js-open-modal\" data-book-id=\"${book._id}\">\n             <img class=\"best-sellers-book-img\" src=\"${book.book_image}\" alt=\"${book.title}\" />\n             <p class=\"best-sellers-book-title\">${book.title}</p>\n             <p class=\"best-sellers-book-author\">${book.author}</p>\n             <p class=\"book-overlay\">Quick view</p>\n\n            </li>`\n            ).join('');\n            // console.log(booksArr);\n\n\n          topBooksByCategories.insertAdjacentHTML(\n            'beforeend',\n            `<li class=\"best-seller-category\"> \n                <p class=\"category-title\"> ${topCategory.list_name} </p> \n                <ul class=\"best-sellers-list-in-category\">\n                ${booksArr} \n                </ul> \n\n                <button type=\"button\" class=\"best-sellers-see-more-button\" data-category-name=\"${topCategory.list_name}\">See more</button>\n                    </li>`)\n        }).join('')\n    })\n    // .then(()=>{\n    //    const openBookEl = document.querySelectorAll('.js-open-modal');\n    //     openBookEl.forEach(function(item){\n    //             //  console.log(item);\n    //              item.addEventListener('click', openModalId);\n    // })\n    // })\n    .then(() => {\n        const seeMoreInCategory = document.querySelectorAll('.best-sellers-see-more-button');\n        seeMoreInCategory.forEach(function(button){\n            // console.log(button);\n            button.addEventListener('click', selectedCategory)\n        })\n\n    })\n    .catch(error => {\n      console.log(error.message);\n      topBooksByCategories.innerHTML = 'No information';\n    });\n\n  return result;\n}\n\nexport { bestSellersMarkup };\n","import { API_SERVICE } from \"./api-requests\";\nimport { selectedCategory } from \"./category-markup\";\n\nconst category = document.querySelector('.category');\n\n\nfunction listMarkup(genre) {\n\n    genre.sort((a, b) => a.list_name.localeCompare(b.list_name));\n    const markup = genre.map(genre => {\n        const { list_name } = genre;\n        return `<li><a class='genre' href=\"#\" target=\"_self\" data-category-name=\"${list_name}\">${list_name}</a></li>`\n    }).join('');\n    category.insertAdjacentHTML('beforeend', markup);\n   \n}\n\nfunction createList() {\n\n    const apiService = new API_SERVICE();\n    apiService.fetchBooksCategoryList()\n        .then(response => {\n            const data = response.data;\n            // console.log(data);\n            listMarkup(data);\n        })\n        .then(()=>{\n            const categoryOption = document.querySelectorAll('.genre');\n            // console.log(categoryOption);\n            categoryOption.forEach(function(item){\n                // console.log(item);\n                item.addEventListener('click', selectedCategory);\n                // item.classList.remove('active');\n\n                // console.log(item);\n            })\n        })\n        \n        .catch(error => { console.error(error) });\n}\n\ncreateList();\n\n\n\n\n"],"names":["API_SERVICE","selectedCategory","bookId","__privateAdd","_BASE_URL","axios","__privateGet","setActive","evt","category","activeCategory","apiByCategory","topBooksByCategories","titleRef","updatePageTitle","categoryTitle","titleWords","accentWord","pageTitle","event","bestSellersMarkup","categoryName","onCategoryMarkup","selectedOption","categoryBooks","booksArr","book","item","apiCategories","topCategories","topCategory","button","error","listMarkup","genre","a","b","markup","list_name","createList","response","data"],"mappings":"wWAEO,MAAMA,CAAY,CAGvB,YAAYC,EAAkBC,EAAQ,CAFtCC,EAAA,KAAAC,EAAY,wCAGV,KAAK,iBAAmBH,EACxB,KAAK,OAASC,CACf,CAED,wBAAyB,CACvB,OAAOG,EAAM,IAAI,GAAGC,EAAA,KAAKF,EAAS,qBAAqB,CACxD,CAID,uBAAwB,CACtB,OAAOC,EAAM,IAAI,GAAGC,EAAA,KAAKF,EAAS,iBAAiB,CACpD,CAID,qBAAqBH,EAAkB,CACrC,OAAOI,EAAM,IACX,GAAGC,EAAA,KAAKF,EAAS,2BAA2BH,CAAgB,EAClE,CACG,CAED,cAAcC,EAAQ,CACpB,OAAOG,EAAM,IAAI,GAAGC,EAAA,KAAKF,EAAS,SAASF,CAAM,EAAE,CACpD,CACH,CA5BEE,EAAA,YCHK,SAASG,EAAUC,EAAK,CAC7B,MAAMC,EAAW,SAAS,cAAc,WAAW,EAE3CC,EAAiBF,EAAI,OAEHC,EAAS,iBAAiB,GAAG,EAEzC,QAAQA,GAAY,CAChCA,EAAS,UAAU,OAAO,QAAQ,CAEtC,CAAG,EACCC,EAAe,UAAU,IAAI,QAAQ,CAEzC,CCRA,MAAMC,EAAgB,IAAIX,EACpBY,EAAuB,SAAS,cAAc,qBAAqB,EACnEC,EAAW,SAAS,cAAc,kBAAkB,EAE1D,SAASC,EAAgBC,EAAe,CACtC,MAAMC,EAAaD,EAAc,MAAM,GAAG,EACpCE,EAAaD,EAAW,MAExBE,EAAY,GADCF,EAAW,KAAK,GAAG,CACP,yCAAyCC,CAAU,UAClF,OAAIF,IAAkB,iBACb;AAAA,oEAGFG,CACT,CAEA,SAASjB,EAAiBkB,EAAO,CAC/BA,EAAM,eAAc,EAIhBA,EAAM,OAAO,QAAQ,eAAiB,kBACxCC,IAIF,MAAMC,EAAe,KAAK,aAAa,oBAAoB,EAC3Dd,EAAUY,CAAK,EAGfN,EAAS,UAAYC,EAAgBO,CAAY,EAEjDT,EAAqB,UAAY,GACjCU,EAAiBD,CAAY,CAC/B,CAEA,eAAeC,EAAiBC,EAAgB,CACjC,MAAMZ,EAChB,qBAAqBY,CAAc,EACnC,KAAKC,GAAiB,CAErB,MAAMC,EAAWD,EAAc,KAC5B,IACCE,GACE,yDAAyDA,EAAK,GAAG;AAAA,uDACtBA,EAAK,UAAU,UAAUA,EAAK,KAAK;AAAA,kDACxCA,EAAK,KAAK;AAAA,mDACTA,EAAK,MAAM;AAAA;AAAA,MAGrD,EACA,KAAK,EAAE,EACVd,EAAqB,UAAU,QAC7B,qBACA,gBACR,EACMA,EAAqB,UAAYa,CACvC,CAAK,EACA,KAAK,IAAM,CACS,SAAS,iBAAiB,gBAAgB,EAClD,QAAQ,SAAUE,EAAM,CAEjCA,EAAK,iBAAiB,QAAS,WAAW,CAClD,CAAO,CACP,CAAK,CACL,CCjEA,MAAMf,EAAuB,SAAS,cAAc,qBAAqB,EAEnEgB,EAAgB,IAAI5B,EAE1BoB,IAEA,eAAeA,GAAoB,CAwDjC,OAvDa,MAAMQ,EAChB,sBAAuB,EAEvB,KAAKC,GACGA,EAAc,KAClB,IAAIC,GAAe,CAIlB,MAAML,EAAWK,EAAY,MAC1B,IACCJ,GACE,6DAA6DA,EAAK,GAAG;AAAA,uDAC9BA,EAAK,UAAU,UAAUA,EAAK,KAAK;AAAA,kDACxCA,EAAK,KAAK;AAAA,mDACTA,EAAK,MAAM;AAAA;AAAA;AAAA,kBAI9D,EAAc,KAAK,EAAE,EAIXd,EAAqB,mBACnB,YACA;AAAA,6CACiCkB,EAAY,SAAS;AAAA;AAAA,kBAEhDL,CAAQ;AAAA;AAAA;AAAA,iGAGuEK,EAAY,SAAS;AAAA,0BAC5F,CAC1B,CAAS,EAAE,KAAK,EAAE,CACb,EAQA,KAAK,IAAM,CACkB,SAAS,iBAAiB,+BAA+B,EACjE,QAAQ,SAASC,EAAO,CAEtCA,EAAO,iBAAiB,QAAS9B,CAAgB,CAC7D,CAAS,CAET,CAAK,EACA,MAAM+B,GAAS,CACd,QAAQ,IAAIA,EAAM,OAAO,EACzBpB,EAAqB,UAAY,gBACvC,CAAK,CAGL,CCjEA,MAAMH,EAAW,SAAS,cAAc,WAAW,EAGnD,SAASwB,EAAWC,EAAO,CAEvBA,EAAM,KAAK,CAACC,EAAGC,IAAMD,EAAE,UAAU,cAAcC,EAAE,SAAS,CAAC,EAC3D,MAAMC,EAASH,EAAM,IAAIA,GAAS,CAC9B,KAAM,CAAE,UAAAI,CAAW,EAAGJ,EACtB,MAAO,oEAAoEI,CAAS,KAAKA,CAAS,WAC1G,CAAK,EAAE,KAAK,EAAE,EACV7B,EAAS,mBAAmB,YAAa4B,CAAM,CAEnD,CAEA,SAASE,GAAa,CAEC,IAAIvC,IACZ,uBAAwB,EAC9B,KAAKwC,GAAY,CACd,MAAMC,EAAOD,EAAS,KAEtBP,EAAWQ,CAAI,CAC3B,CAAS,EACA,KAAK,IAAI,CACiB,SAAS,iBAAiB,QAAQ,EAE1C,QAAQ,SAASd,EAAK,CAEjCA,EAAK,iBAAiB,QAAS1B,CAAgB,CAI/D,CAAa,CACb,CAAS,EAEA,MAAM+B,GAAS,CAAE,QAAQ,MAAMA,CAAK,CAAC,CAAE,CAChD,CAEAO,EAAY"}