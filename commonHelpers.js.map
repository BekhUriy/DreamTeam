{"version":3,"file":"commonHelpers.js","sources":["../src/js/api-requests.js","../src/js/set-active.js","../src/js/category-markup.js","../src/js/best-sellers.js","../src/js/category-list.js","../src/js/render-book.js","../src/js/scrollBtn.js"],"sourcesContent":["import axios from 'axios';\n\nexport class API_SERVICE {\n  #BASE_URL = 'https://books-backend.p.goit.global/';\n\n  constructor(selectedCategory, bookId) {\n    this.selectedCategory = selectedCategory;\n    this.bookId = bookId;\n  }\n  // -------------Запит на категорії-----------------------------\n  fetchBooksCategoryList() {\n    return axios.get(`${this.#BASE_URL}books/category-list`);\n  }\n\n  // ---------------Запит на ТОП книги(бестселлери)-----------------\n\n  fetchBestSellersBooks() {\n    return axios.get(`${this.#BASE_URL}books/top-books`);\n  }\n\n  // -------------Запит на категорію книги, примає назву категорії книги (категорії в сайд барі і по кнопці see more) -----------------\n\n  fetchBooksByCategory(selectedCategory) {\n    return axios.get(\n      `${this.#BASE_URL}books/category?category=${selectedCategory}`\n    );\n  }\n  // -------------Запит на інформацію про книгу (приймає ID книги) -----------------\n  fetchBookById(bookId) {\n    return axios.get(`${this.#BASE_URL}books/${bookId}`);\n  }\n}\n","export function setActive(evt) {\n  const category = document.querySelector('.category');\n\n    const activeCategory = evt.target\n\n      const allCategories = category.querySelectorAll('a');\n\n  allCategories.forEach(category => {\n    category.classList.remove('active');\n\n  });\n    activeCategory.classList.add('active')\n    \n  }","import { API_SERVICE } from './api-requests';\nimport { bestSellersMarkup } from './best-sellers';\nimport { setActive } from './set-active';\nimport { openModalId } from \"./modal-about\";\n\nconst apiByCategory = new API_SERVICE();\nconst topBooksByCategories = document.querySelector('.best-sellers-books');\nconst titleRef = document.querySelector('.home-page-title');\n\n\nconst loader = document.querySelector('.loader');\n\n\nfunction updatePageTitle(categoryTitle) {\n  const titleWords = categoryTitle.split(' ');\n  const accentWord = titleWords.pop();\n  const blackWords = titleWords.join(' ');\n  const pageTitle = `${blackWords} <span class=\"home-page-title-accent\">${accentWord}</span>`;\n  if (categoryTitle === 'All categories') {\n    return `\n    Best Sellers <span class=\"home-page-title-accent\">Books</span>`;\n  }\n  return pageTitle;\n}\n\nfunction selectedCategory(event) {\n  event.preventDefault();\n\n  \n\n  if (event.target.dataset.categoryName === 'All categories') {\n    bestSellersMarkup();\n  \n  }\n  const categoryName = this.getAttribute('data-category-name');\n  setActive(event);\n \n\n  titleRef.innerHTML = updatePageTitle(categoryName);\n\n  loader.classList.remove('is-hidden');\n\n  topBooksByCategories.innerHTML = '';\n  onCategoryMarkup(categoryName);\n}\n\nasync function onCategoryMarkup(selectedOption) {\n  let result = await apiByCategory\n    .fetchBooksByCategory(selectedOption)\n    .then(categoryBooks => {\n      \n      const booksArr = categoryBooks.data\n        .map(\n          book =>\n            `<li class=\"category-book js-open-modal\" data-book-id=\"${book._id}\">\n             <img class=\"best-sellers-book-img\" src=\"${book.book_image}\" alt=\"${book.title}\" />\n             <p class=\"best-sellers-book-title\">${book.title}</p>\n             <p class=\"best-sellers-book-author\">${book.author}</p>\n             <p class=\"book-overlay\">Quick view</p>\n</li>`\n        )\n        .join('');\n      topBooksByCategories.classList.replace(\n        'best-sellers-books',\n        'category-books'\n      );\n      topBooksByCategories.innerHTML = booksArr;\n\n      loader.classList.add('is-hidden');\n\n    })\n    .then(() => {\n      const openBookEl = document.querySelectorAll('.js-open-modal');\n      openBookEl.forEach(function (item) {\n        \n        item.addEventListener('click', openModalId);\n      });\n    });\n}\n\n\n\nexport { selectedCategory };\n","\nimport { API_SERVICE} from \"./api-requests\";\nimport { selectedCategory } from \"./category-markup\";\nimport {openModalId} from './modal-about'\n\nconst topBooksByCategories = document.querySelector('.best-sellers-books')\n\nconst apiCategories = new API_SERVICE();\n\nbestSellersMarkup();\n\nasync function bestSellersMarkup() {\n  let result = await apiCategories\n    .fetchBestSellersBooks()\n    \n    .then(topCategories => {\n      return topCategories.data\n        .map(topCategory => {\n          \n\n          \n          const booksArr = topCategory.books\n            .map(\n              book =>\n                `<li class=\"best-sellers-book js-open-modal\" data-book-id=\"${book._id}\">\n             <img class=\"best-sellers-book-img\" src=\"${book.book_image}\" alt=\"${book.title}\" />\n             <p class=\"best-sellers-book-title\">${book.title}</p>\n             <p class=\"best-sellers-book-author\">${book.author}</p>\n             <p class=\"book-overlay\">Quick view</p>\n\n            </li>`\n            ).join('');\n            \n\n\n          topBooksByCategories.insertAdjacentHTML(\n            'beforeend',\n            `<li class=\"best-seller-category\"> \n                <p class=\"category-title\"> ${topCategory.list_name} </p> \n                <ul class=\"best-sellers-list-in-category\">\n                ${booksArr} \n                </ul> \n\n                <button type=\"button\" class=\"best-sellers-see-more-button\" data-category-name=\"${topCategory.list_name}\">See more</button>\n                    </li>`)\n        }).join('')\n    })\n    .then(()=>{\n       const openBookEl = document.querySelectorAll('.js-open-modal');\n        openBookEl.forEach(function(item){\n                \n                 item.addEventListener('click', openModalId);\n    })\n    })\n    .then(() => {\n        const seeMoreInCategory = document.querySelectorAll('.best-sellers-see-more-button');\n        seeMoreInCategory.forEach(function(button){\n           \n            button.addEventListener('click', selectedCategory)\n        })\n\n    })\n    .catch(error => {\n      \n      topBooksByCategories.innerHTML = 'No information';\n    });\n\n  return result;\n}\n\nexport { bestSellersMarkup };\n","import { API_SERVICE } from \"./api-requests\";\nimport { selectedCategory } from \"./category-markup\";\n\nconst category = document.querySelector('.category');\n\n\nfunction listMarkup(genre) {\n\n    genre.sort((a, b) => a.list_name.localeCompare(b.list_name));\n    const markup = genre.map(genre => {\n        const { list_name } = genre;\n        return `<li><a class='genre' href=\"#\" target=\"_self\" data-category-name=\"${list_name}\">${list_name}</a></li>`\n    }).join('');\n    category.insertAdjacentHTML('beforeend', markup);\n   \n}\n\nfunction createList() {\n\n    const apiService = new API_SERVICE();\n    apiService.fetchBooksCategoryList()\n        .then(response => {\n            const data = response.data;\n            \n            listMarkup(data);\n        })\n        .then(()=>{\n            const categoryOption = document.querySelectorAll('.genre');\n           \n            categoryOption.forEach(function(item){\n                \n                item.addEventListener('click', selectedCategory);\n                \n\n               \n            })\n        })\n        \n        .catch(error => { console.error(error) });\n}\n\ncreateList();\n\n\n\n\n","import { API_SERVICE } from \"./api-requests\";\n\nconst title = document.querySelector('h1')\nconst main = document.querySelector('.best-sellers-books')\nconst category = document.querySelector('.category');\n\ncategory.addEventListener('click', renderGenre)\n\n\nfunction renderGenre(evt) {\n  evt.preventDefault()\n  const apiService = new API_SERVICE();\n  if (evt.target.tagName.toLowerCase() !== 'a') {\n    return;\n  }\n\n  const selectedCategory = evt.target.innerHTML\n  console.log(selectedCategory)\n  title.innerHTML = selectedCategory;\n  if (selectedCategory === 'All categories') {\n    console.log('there must be function for best sellers')\n  }\n  apiService.fetchBooksByCategory(selectedCategory)\n    .then(response => {\n\n      console.log(response.data)\n      const data = response.data\n      main.innerHTML=''\n      renderBooks(data)\n      \n      setActive()\n      \n    })\n    \n    .catch(error => {\n      console.error(error)\n    })\n  \n  function setActive() {\n    const activeCategory = evt.target\n    console.log(activeCategory)\n      const allCategories = evt.target.parentElement.querySelectorAll('a');\n  console.log(allCategories)\n \n  let i = 0;\n  for (i = 0; i < allCategories.length; i++){\n    allCategories[i].classList.remove('active')\n  }\n    activeCategory.classList.add('active')\n    \n  }\n\n  function renderBooks(data) {\n    const markup = data.map(data => {\n      const { _id, book_image, author, title } = data;\n      return `<li class=\"best-sellers-book js-open-modal\" data-book-id=\"${_id}\">\n             <img class=\"best-sellers-book-img\" src=\"${book_image}\" alt=\"${title}\" />\n             <p class=\"best-sellers-book-title\">${title}</p>\n             <p class=\"best-sellers-book-author\">${author}</p>\n             <p class=\"book-overlay\">Quick view</p>\n</li>`\n    }).join('');\n    main.insertAdjacentHTML('beforeend', markup);\n  }\n}","export const scrollBtn = {\n  btn: document.querySelector('.scrollBtn'),\n  show() {\n    this.btn.classList.remove('scrollBtn-hide');\n  },\n  hide() {\n    this.btn.classList.add('scrollBtn-hide');\n  },\n  addEventListener() {\n    if (this.btn) {\n      window.addEventListener('scroll', () => {\n        const scrollY = window.scrollY || document.documentElement.scrollTop;\n        scrollY > 100 ? this.show() : this.hide();\n      });\n      this.btn.onclick = () => {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth',\n        });\n      };\n    }\n  },\n};\nscrollBtn.addEventListener();\n"],"names":["API_SERVICE","selectedCategory","bookId","__privateAdd","_BASE_URL","axios","__privateGet","setActive","evt","category","activeCategory","apiByCategory","topBooksByCategories","titleRef","loader","updatePageTitle","categoryTitle","titleWords","accentWord","pageTitle","event","bestSellersMarkup","categoryName","onCategoryMarkup","selectedOption","categoryBooks","booksArr","book","item","openModalId","apiCategories","topCategories","topCategory","button","error","listMarkup","genre","a","b","markup","list_name","createList","response","data","title","main","renderGenre","apiService","renderBooks","allCategories","i","_id","book_image","author","scrollBtn"],"mappings":"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"}